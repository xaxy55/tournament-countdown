<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shared Countdown</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <!-- Quick access to Settings -->
  <a href="/settings.html" class="settings-btn" title="Settings" aria-label="Settings">
    <span aria-hidden="true">⚙︎</span>
  </a>
  <main class="container">
    

    <div class="controls">
      <label>
        Duration (seconds):
        <input id="duration" type="number" min="0" step="1" />
      </label>
      <div class="presets" aria-label="Presets" id="presetsRow"></div>
      <button id="startBtn">Start</button>
      <button id="resetBtn" class="secondary">Reset</button>
  <button id="fsBtn" class="tertiary" title="Toggle Fullscreen">Fullscreen</button>
    </div>

    <div class="display">
      <div id="remaining" class="remaining">00:30.0</div>
      <div id="status" class="status idle">Idle</div>
    </div>

  <!-- API details removed for presentation mode -->
  </main>

  <div id="flash" class="flash-overlay" aria-hidden="true"></div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/theme.js"></script>
  <script src="/client.js"></script>
  <script>
    // Load persisted defaults and presets
    (async function(){
      try {
        const res = await fetch('/api/settings');
        const data = await res.json();
        const s = data.settings || {};
        const def = Math.max(0, Math.floor(s.defaultDurationSeconds ?? 45));
        const presets = Array.isArray(s.presets) && s.presets.length ? s.presets : [30,45,60];
        document.getElementById('duration').value = String(def);
        const row = document.getElementById('presetsRow');
        row.innerHTML = '';
        presets.forEach(p => {
          const btn = document.createElement('button');
          btn.className = 'preset tertiary';
          btn.dataset.preset = String(p);
          btn.title = `Set ${p} seconds`;
          btn.textContent = `${p}s`;
          btn.addEventListener('click', () => { document.getElementById('duration').value = String(p); });
          row.appendChild(btn);
        });
      } catch {}
    })();
  </script>
</body>
</html>
